@page "/"
@rendermode InteractiveServer

<PageTitle>Home</PageTitle>

@* 

Keeping this here incase the file upload doesnt work again

<div class="m-4">
    <input type="file" @oninput="HandleInput"/>
    <p>@text</p>
</div>
@code{
    string text = "";
    private void HandleInput(ChangeEventArgs e){
        text = (string)e.Value;
    }
} *@

<h1>Upload File</h1>

<h6>Get insights on your price changes</h6>

@* <div class="custom-file-upload">
    <label for="fileInput">UPLOAD</label>
    <input id="fileInput" type="file" class="hidden-file-input" onclick="ReadExcel" />
</div> *@

<button class="btn btn-primary" @onclick="ReadTxt">Click me</button>

<p>@csvData</p>

@code{

    public string csvData = "";

    public void ReadTxt()
    {
        csvData = "";
         List<string[]> csvData2 = new List<string[]>();
        //change this as needed
        string filePath = "C:\\Users\\efren\\OneDrive\\Desktop\\bobbert.txt";


        using (StreamReader reader = new StreamReader(filePath)){
                string line;
                while ((line = reader.ReadLine()) != null){
                    string[] fields = line.Split(',');
                    csvData2.Add(fields);
                }
            }

        foreach (var row in csvData2)
        {
            csvData += string.Join(",", row) + "\n";
        }
        
    }


}




